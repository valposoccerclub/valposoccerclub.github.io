<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Age Division by Season</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: auto;
        }

        input,
        button {
            padding: 8px;
            margin-top: 10px;
            font-size: 16px;
        }

        button {
            background-color: #108C43;
            color: rgb(255, 255, 255);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: #f9f9f9;
        }

        th,
        td {
            padding: 10px;
            border: 1px solid #ccc;
            text-align: left;
        }

        th {
            background-color: #108C43;
            color: rgb(255, 255, 255);
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>

    <!-- <label for="birthdate">Enter Birthdate:</label><br> -->
    <div style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 10px;">
        <label for="birthdate">Enter Birthdate:</label>
        <input type="date" id="birthdate">
        <button onclick="checkSeasonDivisions()">Check Divisions</button>
        <button onclick="resetForm()">Reset</button>
    </div>

    <table id="resultsTable" class="hidden">
        <thead>
            <tr>
                <th>Age</th>
                <th>Season</th>
                <th>Division</th>
            </tr>
        </thead>
        <tbody id="resultsBody"></tbody>
    </table>

    <script>
        function getUpcomingSeasons(currentDate = new Date()) {
            const currentMonth = currentDate.getMonth();
            const currentYear = currentDate.getFullYear();
            const seasons = [];

            let startSeason, startYear;

            if (currentMonth <= 4) {
                startSeason = "Fall";
                startYear = currentYear;
            } else if (currentMonth <= 9) {
                startSeason = "Spring";
                startYear = currentYear + 1;
            } else {
                startSeason = "Spring";
                startYear = currentYear + 1;
            }

            for (let i = 0; i < 4; i++) {
                const label = `${startSeason} ${startYear}`;
                // Assume Fall starts Sep 1 and Spring starts Mar 1
                const seasonDate = new Date(
                    startSeason === "Fall" ? startYear : startYear,
                    startSeason === "Fall" ? 8 : 2, // Sep = 8, Mar = 2
                    1
                );
                seasons.push({ label, seasonDate });

                if (startSeason === "Fall") {
                    startSeason = "Spring";
                    startYear++;
                } else {
                    startSeason = "Fall";
                }
            }

            return seasons;
        }

        function calculateAge(birthDate, onDate) {
            const birth = new Date(birthDate);
            let age = onDate.getFullYear() - birth.getFullYear();
            const m = onDate.getMonth() - birth.getMonth();

            if (m < 0 || (m === 0 && onDate.getDate() < birth.getDate())) {
                age--;
            }

            return age;
        }

        function getDivision(age) {
            if (age < 6) return "Too young";
            if (age <= 7) return "U8";
            if (age <= 9) return "U10";
            if (age <= 11) return "U12";
            if (age <= 13) return "U14";
            // if (age <= 15) return "U16";
            // if (age <= 17) return "U18";
            // if(age <= 18) return "U19";
            return "Too old";
        }

        function checkSeasonDivisionsold() {
            const birthdate = document.getElementById("birthdate").value;
            if (!birthdate) {
                alert("Please enter a valid birthdate.");
                return;
            }

            const resultsBody = document.getElementById("resultsBody");
            resultsBody.innerHTML = "";

            const seasons = getUpcomingSeasons(new Date());

            seasons.forEach(season => {
                const age = calculateAge(birthdate, season.seasonDate);
                const division = getDivision(age);

                const row = document.createElement("tr");
                row.innerHTML = `<td>${age}</td><td>${season.label}</td><td>${division}</td>`;
                resultsBody.appendChild(row);
            });

            document.getElementById("resultsTable").classList.remove("hidden");
        }

        function checkSeasonDivisions() {
            const birthdateInput = document.getElementById("birthdate");
            const birthdate = birthdateInput.value;

            if (!birthdate) {
                alert("Please enter a birthdate.");
                return;
            }

            const birthDateObj = new Date(birthdate);
            const today = new Date();

            if (birthDateObj >= today) {
                alert("Birthdate must be in the past.");
                return;
            }

            const minAge = 6;
            const ageToday = calculateAge(birthDateObj, today);
            if (ageToday < minAge) {
                alert("Child must be at least 6 years old.");
                return;
            }

            const resultsBody = document.getElementById("resultsBody");
            resultsBody.innerHTML = "";

            const seasons = getUpcomingSeasons(today);

            seasons.forEach(season => {
                const age = calculateAge(birthdate, season.seasonDate);
                const division = getDivision(age);

                const row = document.createElement("tr");
                row.innerHTML = `
                      <td>${age}</td>
      <td>${season.label}</td>
      <td>${division}</td>
    `;
                resultsBody.appendChild(row);
            });

            document.getElementById("resultsTable").classList.remove("hidden");
        }


        function resetForm() {
            document.getElementById("birthdate").value = "";
            document.getElementById("resultsBody").innerHTML = "";
            document.getElementById("resultsTable").classList.add("hidden");
        }
    </script>

</body>

</html>